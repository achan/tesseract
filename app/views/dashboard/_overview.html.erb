<div id="dashboard_overview">
  <% if overview %>
    <% summary, details = overview.body.split("\n\n", 2) %>
    <div data-controller="collapsible">
      <div class="text-sm overview-content">
        <%= render_markdown(summary) %>
      </div>
      <% if details.present? %>
        <div class="flex items-center gap-2 mt-2">
          <button type="button" data-action="collapsible#toggle" class="flex items-center gap-1.5 text-xs text-muted hover:text-foreground cursor-pointer">
            <svg data-collapsible-target="icon" class="w-3 h-3 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
            <span data-collapsible-target="label">Show details</span>
          </button>
          <span class="text-xs text-muted">&middot;</span>
          <span class="text-xs text-muted">Generated at <time datetime="<%= overview.created_at.iso8601 %>" data-controller="local-time-display"><%= overview.created_at.strftime("%b %-d, %l:%M %p") %></time></span>
        </div>
        <div data-collapsible-target="content" hidden class="text-sm overview-content mt-3">
          <%= render_markdown(details) %>
        </div>
      <% else %>
        <p class="text-xs text-muted mt-2">Generated at <time datetime="<%= overview.created_at.iso8601 %>" data-controller="local-time-display"><%= overview.created_at.strftime("%b %-d, %l:%M %p") %></time></p>
      <% end %>
    </div>
  <% else %>
    <p class="text-sm text-muted">No overview generated yet.</p>
  <% end %>
</div>
