<div id="live_activity_<%= live_activity.id %>" class="inline-block w-[320px] align-top p-3 bg-card border border-border rounded-md mr-3 whitespace-normal"
     <% if live_activity.status == "ending" && live_activity.ends_at %>
       data-controller="countdown" data-countdown-ends-at-value="<%= live_activity.ends_at.iso8601 %>"
     <% end %>>
  <div class="flex items-center justify-between mb-2">
    <div class="flex items-center gap-2 min-w-0">
      <% if live_activity.status == "active" %>
        <span class="flex-shrink-0 flex h-3 w-3 relative">
          <span class="animate-ping absolute inline-flex h-3 w-3 rounded-full bg-yellow-400 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-3 w-3 bg-yellow-500"></span>
        </span>
      <% else %>
        <span class="flex-shrink-0 inline-flex rounded-full h-3 w-3 bg-green-500"></span>
      <% end %>
      <span class="text-sm font-semibold text-foreground truncate"><%= live_activity.title %></span>
    </div>
    <%= button_to live_activity_path(live_activity), method: :delete,
        class: "flex-shrink-0 text-muted hover:text-foreground", title: "Remove" do %>
      <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    <% end %>
  </div>
  <% if live_activity.subtitle.present? %>
    <p class="text-xs text-muted mb-1 truncate"><%= live_activity.subtitle %></p>
  <% end %>
  <% if live_activity.metadata.present? && live_activity.metadata.any? %>
    <div class="flex flex-wrap items-center gap-x-3 gap-y-0.5 mb-1">
      <% live_activity.metadata.each do |key, value| %>
        <span class="text-xs text-muted"><%= key.to_s.titleize %>: <%= value %></span>
      <% end %>
    </div>
  <% end %>
  <span class="text-xs text-muted" data-controller="elapsed" data-elapsed-since-value="<%= live_activity.created_at.iso8601 %>">
    <span data-elapsed-target="display"></span>
  </span>
</div>
