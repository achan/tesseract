<%= form_with(model: workspace) do |f| %>
  <% if workspace.errors.any? %>
    <div class="bg-red-50 dark:bg-red-900/30 border border-destructive rounded-md px-4 py-3 mb-4 text-destructive text-sm">
      <ul class="list-disc pl-5">
        <% workspace.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-4">
    <%= f.label :team_name, "Team Name", class: "block text-sm font-semibold mb-1" %>
    <%= f.text_field :team_name, required: true,
          class: "w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent" %>
  </div>

  <div class="mb-4">
    <%= f.label :user_token, "User Token", class: "block text-sm font-semibold mb-1" %>
    <%= f.password_field :user_token, placeholder: workspace.persisted? ? "(unchanged)" : nil,
          class: "w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent" %>
  </div>

  <div class="mb-4">
    <%= f.label :signing_secret, "Signing Secret", class: "block text-sm font-semibold mb-1" %>
    <%= f.password_field :signing_secret, placeholder: workspace.persisted? ? "(unchanged)" : nil,
          class: "w-full px-3 py-2 border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent" %>
  </div>

  <fieldset class="mb-4">
    <legend class="text-sm font-semibold mb-2">Direct Messages</legend>
    <div class="flex flex-col gap-2">
      <label class="inline-flex items-center gap-2 text-sm">
        <%= f.check_box :include_dms, class: "rounded border-border" %>
        Track direct messages (DMs)
      </label>
      <label class="inline-flex items-center gap-2 text-sm">
        <%= f.check_box :include_mpims, class: "rounded border-border" %>
        Track group direct messages (MPIMs)
      </label>
    </div>
  </fieldset>

  <div class="flex gap-3 mt-6">
    <%= f.submit class: "inline-flex items-center px-4 py-2 text-sm font-medium text-primary-foreground bg-primary rounded-md hover:bg-primary/90 cursor-pointer" %>
    <%= link_to "Cancel", root_path,
          class: "inline-flex items-center px-4 py-2 text-sm font-medium border border-border rounded-md hover:bg-accent" %>
  </div>
<% end %>
